package twolovers.exploitfixer.bukkit.modules;

import org.bukkit.configuration.file.YamlConfiguration;
import twolovers.exploitfixer.interfaces.modules.MessagesModule;
import twolovers.exploitfixer.interfaces.modules.Module;

public class BukkitMessagesModule implements MessagesModule {
	private Object messagesYml;

	public BukkitMessagesModule(final Object messagesYml) {
		reload(messagesYml);
	}

	public String getString(String locale, final String path) {
		String string;

		if (locale == null)
			locale = "en";

		string = ((YamlConfiguration) messagesYml).getString(locale + path);

		if (string == null || string.isEmpty())
			string = ((YamlConfiguration) messagesYml).getString("en" + path);

		if (string != null)
			string = string.replace("&", "\u00A7");
		else
			string = "";

		return string;
	}

	public final String getReload(final String locale) {
		return getString(locale, ".commands.reload");
	}

	public final String getHelp(final String locale) {
		return getString(locale, ".commands.help");
	}

	public final String getUnknown(final String locale) {
		return getString(locale, ".commands.error.unknown");
	}

	public final String getPermission(final String locale) {
		return getString(locale, ".commands.error.permission");
	}

	public final String getConsole(final String locale) {
		return getString(locale, ".commands.error.console");
	}

	public final String getEnable(final String locale) {
		return getString(locale, ".commands.notifications.enable");
	}

	public final String getDisable(final String locale) {
		return getString(locale, ".commands.notifications.disable");
	}

	public final String getKickMessage(final Module module, final String locale) {
		return getString(locale, ".modules." + module.getName().toLowerCase() + ".kick_message");
	}

	public void reload(Object messagesYml) {
		this.messagesYml = messagesYml;
	}

	public String getStats(String locale) {
		return getString(locale, ".modules.stats.message");
	}
}